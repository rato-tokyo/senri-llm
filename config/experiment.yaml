# Senri Experiment Configuration
# 実験全体の設定

# Output settings
output:
  base_dir: "./outputs"
  checkpoint_dir: "checkpoints"
  log_dir: "logs"

# Experiment modes
# Available: test, test_memory, convert, train, eval
experiment:
  default_mode: "test"

# Model conversion settings
conversion:
  save_converted_model: true
  verify_after_conversion: true

# Google Colab specific settings
colab:
  # Google Drive mount path for checkpoints
  drive_checkpoint_path: "/content/drive/MyDrive/senri-checkpoints"
  # Auto-save to drive after training
  auto_save_to_drive: true

# Evaluation settings
eval:
  # Benchmarks to run
  benchmarks:
    - "niah"
    - "multi_query_niah"

  # Context lengths to test (in tokens)
  # Note: Should not exceed training max_length (2048) unless model supports extrapolation
  context_lengths:
    - 1024
    - 1536
    - 2048

  # Single-NIAH specific settings
  niah:
    # Depth percentages (0.0 = start, 1.0 = end)
    depth_percentages:
      - 0.0
      - 0.25
      - 0.5
      - 0.75
      - 1.0
    # Number of samples per (context_length, depth) combination
    num_samples: 5
    # Max new tokens for generation
    max_new_tokens: 32

  # Multi-Query NIAH specific settings
  multi_query_niah:
    # Number of key-value pairs to insert
    num_kv_pairs: 6
    # Number of queries to ask
    num_queries: 2
    # Number of samples per context length
    num_samples: 5
    # Max new tokens for generation
    max_new_tokens: 64

  # Random seed for reproducibility
  seed: 42
